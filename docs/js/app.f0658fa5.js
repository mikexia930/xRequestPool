(function(e){function t(t){for(var r,a,o=t[0],c=t[1],i=t[2],d=0,f=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return u.push.apply(u,i||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(u.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},s={app:0},u=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/xRequestPool/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var l=c;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"12bc":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.url1,expression:"url1"}],attrs:{placeholder:"GET url 1 "},domProps:{value:e.url1},on:{input:function(t){t.target.composing||(e.url1=t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.url2,expression:"url2"}],attrs:{placeholder:"GET url 2 "},domProps:{value:e.url2},on:{input:function(t){t.target.composing||(e.url2=t.target.value)}}}),n("div",{staticClass:"result",domProps:{innerHTML:e._s(e.resultData)}}),n("button",{on:{click:function(t){return e.handleOne()}}},[e._v(" send 1 request ")]),n("button",{on:{click:function(t){return e.handleThree()}}},[e._v(" send 3 request ")]),n("button",{on:{click:function(t){return e.handleDiff()}}},[e._v(" send 3 request 2 same 1 different ")]),n("button",{on:{click:function(t){return e.handleClear()}}},[e._v(" clear ")])])},u=[],a=(n("99af"),n("5530")),o=n("d4ec"),c=n("bee2"),i=n("ade3"),l=(n("d3b7"),n("159b"),n("b64b"),n("bc3a")),d=n.n(l),f=n("8237"),h=n.n(f),p=n("4328"),v=n.n(p),b=function(){function e(){Object(o["a"])(this,e),Object(i["a"])(this,"RequestInsCache",{})}return Object(c["a"])(e,[{key:"getKeyByUrl",value:function(e){var t=e.method,n=e.url,r=n;if(t)switch(t.toUpperCase()){case"GET":r+=JSON.stringify(e.params);break;case"POST":r+=JSON.stringify(e.data);break;default:break}return h()(r)}},{key:"setContentType",value:function(e){var t="";if(Object.prototype.hasOwnProperty.call(e,"contentType"))t=e.contentType;else{var n=e.method||"";switch(n.toUpperCase()){case"POST":t="application/x-www-form-urlencoded";break;case"FILE":t="multipart/form-data";break;default:t="application/json";break}}return t}},{key:"isHasCacheRequest",value:function(e){return Object.prototype.hasOwnProperty.call(this.RequestInsCache,e)}},{key:"deleteCacheRequest",value:function(e){delete this.RequestInsCache[e]}},{key:"getRequestIns",value:function(e){var t=this,n=d.a.create({baseURL:e.baseUrl,timeout:e.timeout,headers:Object(a["a"])({"content-type":this.setContentType(e)},e.headers)});return n.interceptors.request.use((function(e){var n=e,r=t.getKeyByUrl(n);return n.cancelToken=new d.a.CancelToken((function(e){t.RequestInsCache[r].cancel=e})),n.data=v.a.stringify(e.data),n}),(function(e){return Promise.reject(e)})),n.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),n}},{key:"cancelRequest",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?this.isHasCacheRequest(t)&&this.RequestInsCache[t].cancel():Object.keys(this.RequestInsCache).forEach((function(t){e.RequestInsCache[t].cancel()}))}},{key:"addRequestTimes",value:function(e,t){var n=this.RequestInsCache[t].times||0;switch(e){case"deduct":n-=1;break;case"add":default:n+=1;break}return this.RequestInsCache[t].times=n,n}},{key:"setRequestResult",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.RequestInsCache[e].times&&this.RequestInsCache[e].times>0?this.RequestInsCache[e].result={status:t,data:n}:this.deleteCacheRequest(e)}},{key:"doRequest",value:function(e,t){var n=this,r=this.getKeyByUrl(t),s=this.isHasCacheRequest(r),u=null;return s||(this.RequestInsCache[r]={}),s?(this.addRequestTimes("add",r),u=new Promise((function(e,t){var s=setInterval((function(){var u,a;if(null!==(u=n.RequestInsCache[r])&&void 0!==u&&null!==(a=u.result)&&void 0!==a&&a.status){clearInterval(s);var o=n.addRequestTimes("deduct",r),c=n.RequestInsCache[r].result;o<=0&&n.deleteCacheRequest(r),"success"===c.status?e(c.data):t(c.data)}}),500)}))):u=new Promise((function(s,u){e(t).then((function(e){n.setRequestResult(r,"success",e),s(e)})).catch((function(e){n.setRequestResult(r,"error",e),u(e)}))})),u}}],[{key:"getInstance",value:function(){return null==this.RequestIns&&(this.RequestIns=new e),this.RequestIns}}]),e}();Object(i["a"])(b,"RequestIns",void 0);var q=b.getInstance(),y=q,R={name:"App",data:function(){return{url1:"",url2:"",resultData:""}},methods:{handleOne:function(){this.doRequest(this.url1)},handleThree:function(){for(var e=0;e<3;e+=1)this.doRequest(this.url1)},handleDiff:function(){for(var e=0;e<3;e+=1){var t="";t=e%2?this.url1:this.url2,this.doRequest(t)}},handleClear:function(){this.resultData=""},getRequest:function(){var e={baseUrl:"",timeout:300,headers:{}};return y.getRequestIns(e)},doRequest:function(e){var t=this;if(e){var n={url:e,method:"GET",headers:{},params:{projectId:123,userId:4378}};y.doRequest(this.getRequest(),n).then((function(e){t.resultData="".concat(t.resultData,"\n").concat(JSON.stringify(e)),console.log("result-",e)})).catch((function(e){console.log("err-",e)}))}else alert("please set url first")}},beforeDestroy:function(){y.cancelRequest()}},m=R,g=(n("a926"),n("2877")),C=Object(g["a"])(m,s,u,!1,null,"425d9ab1",null),O=C.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(O)}}).$mount("#app")},a926:function(e,t,n){"use strict";n("12bc")}});